# Copilot Instructions - SafeNetworkLink

This file provides guidance for GitHub Copilot when working on the SafeNetworkLink project. These instructions help maintain consistency, quality, and project goals.

## Project Overview

SafeNetworkLink is a React + TypeScript web application for visualizing non-monogamous STI transmission networks. It features:
- Interactive network visualization with SVG
- Breadth-First Search (BFS) algorithm for traversal
- Graphviz DOT format generation for network export
- Dynamic person and relationship management

## Architecture Guidelines

### Component Organization
- **Location**: `src/components/[ComponentName]/[ComponentName].tsx`
- **Pattern**: Each component gets its own folder
- **Naming**: PascalCase for component files and exports
- **Props**: Define explicit TypeScript interfaces for all props

Example structure:
```typescript
// src/components/MyComponent/MyComponent.tsx
interface MyComponentProps {
  title: string;
  onAction: () => void;
}

export const MyComponent: React.FC<MyComponentProps> = ({ title, onAction }) => {
  return <div>{title}</div>;
};
```

### Services & Business Logic
- **Location**: `src/services/[service].service.ts`
- **Pattern**: Export as named functions or class methods
- **Purpose**: Contain pure logic separate from React components
- **Key Service**: `network.service.ts` contains BFS, serialization, and network management

### Type Definitions
- **Location**: `src/types/network.types.ts`
- **Pattern**: Export interfaces and types only
- **Convention**: Suffix custom types with `Type` or use `Props` for component properties

### Styling
- **Approach**: CSS modules or inline styles
- **Files**: Colocate CSS with components (e.g., `Component.tsx` + `Component.css`)
- **Avoid**: Global CSS unless absolutely necessary

## Coding Standards

### TypeScript
```typescript
// ✅ DO: Explicit types
const persons: Person[] = [];
function addPerson(person: Person): void { }

// ❌ DON'T: Use `any`
const persons: any[] = [];

// ✅ DO: Interface for complex objects
interface NetworkGraph {
  nodes: Person[];
  edges: Relationship[];
}

// ❌ DON'T: Object type shorthand for public APIs
type NetworkGraph = {
  nodes: Person[];
  edges: Relationship[];
};
```

### React Components
```typescript
// ✅ DO: Functional components with hooks
const MyComponent: React.FC<MyComponentProps> = ({ prop }) => {
  const [state, setState] = useState(initialValue);
  return <div>{state}</div>;
};

// ✅ DO: Memoization for performance-sensitive components
const OptimizedList = React.memo(({ items }: ListProps) => {
  return <ul>{items.map(item => <li key={item.id}>{item.name}</li>)}</ul>;
});

// ❌ DON'T: Class components
class MyComponent extends React.Component { }
```

### Naming Conventions
- Components: `PascalCase` (e.g., `NetworkVisualization`)
- Functions: `camelCase` (e.g., `calculatePath`)
- Constants: `UPPER_SNAKE_CASE` (e.g., `MAX_DEPTH`)
- Boolean variables: Start with `is`, `has`, `can` (e.g., `isLoaded`, `hasError`)

## Network Algorithm Implementation

### BFS Algorithm
When implementing or modifying BFS functionality:
- Accept a start node and optional depth limit
- Return array of visited nodes in traversal order
- Handle cycles properly (track visited nodes)
- Consider performance for large networks

```typescript
export function breadthFirstSearch(
  startNode: Person,
  network: Person[],
  maxDepth?: number
): Person[] {
  // Implementation following the above guidelines
}
```

### Graphviz DOT Format
When generating DOT code:
- Ensure proper escaping for special characters
- Use rankdir for layout direction
- Include node styling for visual clarity
- Return valid DOT syntax that can be visualized

## Testing Expectations

When writing new features:
- Consider edge cases (empty networks, single nodes, cycles)
- Test with large datasets if performance is a concern
- Document complex logic with comments
- Use descriptive variable names

## PR Guidelines for Copilot

When creating pull requests:
1. **Scope**: Keep PRs focused on single features or fixes
2. **Commit Messages**: Use conventional commits format
   - `feat:` for new features
   - `fix:` for bug fixes
   - `refactor:` for code reorganization
   - `docs:` for documentation
   - `test:` for test additions

3. **Description**: Include
   - What changed and why
   - How to test the changes
   - Any breaking changes
   - Related issue numbers

4. **Code Quality**
   - No console.log in production code
   - Handle errors gracefully
   - Add loading/error states for async operations
   - Ensure TypeScript compilation passes

## Performance Considerations

- Memoize expensive computations
- Use React.memo for frequently re-rendered components
- Avoid creating new objects/functions in render
- Consider virtualization for large lists
- Profile with React DevTools

## Accessibility (a11y)

When creating UI components:
- Use semantic HTML (`button`, `form`, etc.)
- Include ARIA labels where needed
- Ensure keyboard navigation works
- Maintain sufficient color contrast
- Test with screen readers

## Documentation

For new features:
- Update component JSDoc comments
- Document complex algorithms with inline comments
- Keep README.md updated with major changes
- Document any new environment variables needed

## Common Patterns in This Project

### Managing Network State
```typescript
const [persons, setPersons] = useState<Person[]>([]);
const [relationships, setRelationships] = useState<Relationship[]>([]);

const addPerson = (person: Person) => {
  setPersons([...persons, person]);
};
```

### Generating DOT Format
```typescript
const dotCode = generateDotCode(persons, relationships);
// Can be exported or used with visualization tools
```

### Network Visualization
- SVG-based rendering for network graphs
- Interactive elements for manipulation
- Responsive design for different screen sizes

## Version Control Tips

- Keep commits atomic and focused
- Use feature branches: `feature/description`
- Use bugfix branches: `bugfix/description`
- Delete branches after merging
- Rebase before pushing if needed for clean history

## Resources

- [React Documentation](https://react.dev)
- [TypeScript Handbook](https://www.typescriptlang.org/docs/)
- [Vite Documentation](https://vitejs.dev)
- [Graphviz Documentation](https://graphviz.org)
- Project CONTRIBUTING.md for contribution guidelines

## When in Doubt

- Follow the existing code style and patterns
- Look at similar components/services as examples
- Keep components small and focused on one responsibility
- Ask clarifying questions in comments/issues
- Prefer explicit over implicit

---

These guidelines ensure the SafeNetworkLink codebase remains maintainable, consistent, and welcoming to contributors.
